%% LyX 1.6.7 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[french]{paper}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage[a4paper]{geometry}
\geometry{verbose,tmargin=2cm,bmargin=2cm,lmargin=2cm,rmargin=2cm,headheight=2cm,headsep=2cm,footskip=2cm}
\setlength{\parskip}{\medskipamount}
\setlength{\parindent}{0pt}
\usepackage{babel}
\addto\extrasfrench{\providecommand{\og}{\leavevmode\flqq~}\providecommand{\fg}{\ifdim\lastskip>\z@\unskip\fi~\frqq}}

\usepackage{float}
\usepackage{textcomp}
\usepackage{graphicx}
\usepackage[unicode=true, pdfusetitle,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
%% A simple dot to overcome graphicx limitations
\newcommand{\lyxdot}{.}


\makeatother

\begin{document}

\title{Rapport du Projet de Système Digital n\textdegree{}2}


\author{Ismaël Belghiti, Damien Desfontaines, Guillaume Geoffroy, Kenji Maillard }


\date{4 janvier 2012}

\maketitle

\section{Introduction}

Nous avons fini la création du simulateur de circuit et du langage
de description du circuit. Depuis le \href{http://www.eleves.ens.fr/home/desfonta/rapport.pdf}{rapport n°1},
le langage n'a évolué que pour ajouter quelques fonctionnalités supplémentaires
d'ordre pratique, comme le fait de coder directement une certaine
suite binaire avec une syntaxe du type \$010011, la possibilité de
commenter le code source ou de le séparer en plusieurs fichiers. Nous
ne nous attarderons pas sur ces modifications mineures.

Ce rapport décrit donc l'étape suivante, c'est à dire le dessin du
microprocesseur et ses caractéristiques techniques. 


\section{Inspiration et dessin du microprocesseur}

Pour le dessin du microprocesseur, nous nous sommes inspirés des schémas
de fonctionnement MIPS présents dans l'ouvrage \href{http://www.amazon.com/Computer-Organization-Design-Revised-Fourth/dp/0123747503}{Computer Organization and Design}.
Nous donc reprenons ici le schéma global de fonctionnement, tiré de
cet ouvrage :

%
\begin{figure}[H]
\caption{\protect\includegraphics[width=12cm]{\lyxdot \lyxdot /ArchitectureMipsDetaillee}}

\end{figure}


Décrivons les différents blocs présents sur ce schéma qu'il a fallu
implémenter.


\subsection{ALU}


\paragraph*{Principe :}

L'ALU, Unité Arithmétique et Logique en français, est la partie du
microprocesseur chargée d'effectuer les calculs. Elle reçoit un identifiant
d'opération du bloc {}``ALU Control'', effectue l'opération correspondante
sur ses deux entrées et renvoie le résultat. Il s'agit donc d'un bloc
purement combinatoire : rien n'est stocké dans l'ALU, qui ne contient
donc aucun registre et effectue toutes les opérations en un seul cycle.


\paragraph*{Opérations implémentées :}

Les opérations implémentées sont les opérations arithmétiques et logiques
classiques : + , - , {*} , And, Or, Xor, Nand, Nor (la division n'est
pour l'heure pas incluse). Le fichier Alu.rock présente ce bloc, les
commentaires à la fin du fichier devraient être suffisants pour pouvoir
lancer quelques tests.


\subsection{Registres}

Le bloc de registres contient 32 registres, dont l'organisation et
le fonctionnement sont calqués sur le modèle MIPS. Ou pas. TODO


\subsection{Control}

Le bloc de contrôle, présent dans notre projet sous le nom de {}``Décodeur''
a dans notre projet non seulement le rôle du bloc {}``Control''
de l'architecture standart MIPS mais c'est aussi lui qui s'occupe
de la synchronisation entre les différents cycles parcourus pour une
instruction donnée. TODO à détailler


\subsection{Instruction Memory}

TODO


\subsection{Data Memory}

La mémoire va être implémentée par un device. TODO à détailler


\section{Détails techniques}


\subsection{Format des instructions}

TODO explication du $R$-format, $I$-format, format des jumps, etc.


\subsection{ALU}


\paragraph*{Fonctionnement :}

Le bloc Alu<m> du code source prend 3 entrées :
\begin{itemize}
\item deux arguments $a$ et $b$ sur $m$ bits,
\item un sélecteur d'opération sur 4 bits,
\end{itemize}
et en fonction de la valeur du sélecteur, qui contient le {}``code''
de l'opération voulue (0 pour And, 1 pour Or, etc.), il renvoie le
résultat sur $m$ bits, tronqué si besoin (les éventuelles retenues
sont perdues, tous les calculs sont faits modulo $2^{m}$).


\paragraph*{Comment ça marche :}

Chaque opération de l'ALU est codée séparément. Puis, à la lecture
de deux entiers, toutes les opérations possibles sont exécutées simultanément,
et un filtre sélectionne le résultat voulu. Tout fonctionne en un
seul cycle, et les circuits correspondant aux diverses opérations
ont tous été codés récursivement.


\subsection{Registres}

TODO, etc.
\end{document}
